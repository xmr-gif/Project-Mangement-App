<nav class="bg-[#1a1d29] border-b border-gray-800 px-6 py-3">
  <div class="flex items-center justify-between">
    <!-- Left Side - Project Dropdown -->
    <div class="relative">
      <button
        (click)="toggleProjectDropdown()"
        class="flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors text-white">
        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
        </svg>
        <span class="font-medium">Project: {{ selectedProject.name }}</span>
        <svg
          class="w-4 h-4 text-gray-400 transition-transform"
          [class.rotate-180]="isProjectDropdownOpen"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>

      <!-- Dropdown Menu -->
      <div
        *ngIf="isProjectDropdownOpen"
        class="absolute left-0 mt-2 w-64 bg-[#252836] rounded-lg shadow-xl border border-gray-700 py-2 z-50">
        <div class="px-3 py-2 text-xs text-gray-400 uppercase font-semibold">
          Switch Project Environment:
        </div>
        <div *ngFor="let project of projects"
             (click)="selectProject(project)"
             class="px-4 py-2.5 hover:bg-gray-700 cursor-pointer flex items-center justify-between transition-colors">
          <span class="text-white">{{ project.name }}</span>
          <span
            *ngIf="project.id === selectedProject.id"
            class="w-2 h-2 bg-blue-500 rounded-full"></span>
        </div>
      </div>
    </div>

    <!-- Right Side - Notifications and Profile -->
    <div class="flex items-center gap-3">
      <!-- Notifications Button -->
      <div class="relative">
        <button (click)="toggleNotificationsPopup()" class="relative p-2 rounded-lg hover:bg-gray-800 transition-colors">
          <lucide-icon name="Bell" class="w-6 h-6 text-white"></lucide-icon>
          <span
            *ngIf="hasNotifications"
            class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full border-2 border-[#1a1d29]">
          </span>
        </button>

        <!-- Notifications Popup -->
        <div *ngIf="isNotificationsPopupOpen" 
             class="absolute right-0 mt-2 w-96 bg-gray-900 rounded-xl shadow-2xl border border-gray-700 z-50 max-h-96 flex flex-col">
          
          <!-- Header -->
          <div class="p-4 border-b border-gray-700 flex items-center justify-between">
            <h3 class="text-white font-semibold">Notifications</h3>
            <button (click)="toggleNotificationsPopup()" class="text-gray-400 hover:text-white">
              <lucide-icon name="X" class="w-5 h-5"></lucide-icon>
            </button>
          </div>

          <!-- Notifications List -->
          <div class="overflow-y-auto flex-1 p-3 space-y-3
                      [&::-webkit-scrollbar]:w-2
                      [&::-webkit-scrollbar-track]:bg-gray-800
                      [&::-webkit-scrollbar-thumb]:bg-gray-700
                      [&::-webkit-scrollbar-thumb]:rounded-md">
            
            <div *ngFor="let notification of notifications" 
                 class="flex items-start gap-3 p-3 rounded-lg bg-gray-800 hover:bg-gray-750 transition-colors cursor-pointer border border-gray-700">
              
              <!-- Unread indicator -->
              <div *ngIf="!notification.read" class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
              <div *ngIf="notification.read" class="w-2 h-2 rounded-full mt-2"></div>

              <!-- Icon -->
              <lucide-icon 
                [name]="getNotificationIcon(notification.type)" 
                class="w-5 h-5 text-gray-400 mt-1 flex-shrink-0">
              </lucide-icon>

              <!-- Content -->
              <div class="flex-1 min-w-0">
                <h4 class="text-white text-sm font-medium">{{ notification.title }}</h4>
                <p *ngIf="notification.description" class="text-gray-400 text-xs mt-0.5">{{ notification.description }}</p>
                <p class="text-gray-500 text-xs mt-1">{{ formatDate(notification.date) }}</p>
              </div>
            </div>

            <!-- Empty state -->
            <div *ngIf="notifications.length === 0" class="text-center py-8">
              <lucide-icon name="Bell" class="w-12 h-12 text-gray-600 mx-auto mb-2"></lucide-icon>
              <p class="text-gray-400">No notifications</p>
            </div>
          </div>

          <!-- Footer -->
          <div class="p-3 border-t border-gray-700">
            <button (click)="viewAllNotifications()" class="w-full text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors py-2">
              View All Notifications
            </button>
          </div>
        </div>
      </div>

<!-- Applications Dropdown -->
<div class="relative">
  <button
    (click)="toggleAppsDropdown()"
    class="p-2 rounded-lg hover:bg-gray-800 transition-colors flex items-center">

    <!-- Apps Icon (grid) -->
    <lucide-icon name="layout-grid" class="w-6 h-6 text-gray-300" ></lucide-icon>
  </button>

  <!-- Dropdown Menu -->
  <div
    *ngIf="isAppsDropdownOpen"
    class="absolute right-0 mt-2 w-56 bg-[#252836] rounded-lg shadow-xl border border-gray-700 py-2 z-50">

    <div class="px-4 py-2 text-xs text-gray-400 uppercase font-semibold">
      Applications
    </div>

    <a href="#" class="flex items-center gap-2 px-4 py-2.5 text-sm text-gray-300 hover:bg-gray-700 transition-colors">
      <span class="w-2 h-2 bg-blue-500 rounded-full"></span>
      CV Maker
    </a>

    <a href="#" class="flex items-center gap-2 px-4 py-2.5 text-sm text-gray-300 hover:bg-gray-700 transition-colors">
      <span class="w-2 h-2 bg-green-500 rounded-full"></span>
      Interview Trainer
    </a>

    <a href="#" class="flex items-center gap-2 px-4 py-2.5 text-sm text-gray-300 hover:bg-gray-700 transition-colors">
      <span class="w-2 h-2 bg-purple-500 rounded-full"></span>
      Grokking Algorithms
    </a>

  </div>
</div>

      <!-- Profile Dropdown -->
      <div class="relative">
        <button
          (click)="toggleProfileDropdown()"
          class="flex items-center gap-2 p-1 rounded-lg hover:bg-gray-800 transition-colors">
          <img
            src="https://ui-avatars.com/api/?name=User+Name&background=6366f1&color=fff"
            alt="Profile"
            class="w-8 h-8 rounded-full">
          <svg
            class="w-4 h-4 text-gray-400 transition-transform"
            [class.rotate-180]="isProfileDropdownOpen"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        <!-- Profile Dropdown Menu -->
        <div
          *ngIf="isProfileDropdownOpen"
          class="absolute right-0 mt-2 w-56 bg-[#252836] rounded-lg shadow-xl border border-gray-700 py-2 z-50">
          <div class="px-4 py-3 border-b border-gray-700">
            <p class="text-sm font-medium text-white">John Doe</p>
            <p class="text-xs text-gray-400 mt-0.5">john.doe@example.com</p>
          </div>
          <a href="#" class="block px-4 py-2.5 text-sm text-gray-300 hover:bg-gray-700 transition-colors">
            Profile Settings
          </a>
          <a href="#" class="block px-4 py-2.5 text-sm text-gray-300 hover:bg-gray-700 transition-colors">
            Account
          </a>
          <a href="#" class="block px-4 py-2.5 text-sm text-gray-300 hover:bg-gray-700 transition-colors">
            Preferences
          </a>
          <div class="border-t border-gray-700 mt-2 pt-2">
            <a href="#" class="block px-4 py-2.5 text-sm text-red-400 hover:bg-gray-700 transition-colors">
              Logout
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Overlay to close dropdowns when clicking outside -->
<div
  *ngIf="isProjectDropdownOpen || isProfileDropdownOpen"
  (click)="closeDropdowns()"
  class="fixed inset-0 z-40">
</div>
